@page
@model OnlineLearningPlatformAss2.RazorWebApp.Pages.IndexModel

@{
    ViewData["Title"] = "Learn Without Limits - LearnHub";
}

@section Styles {
    <link rel="stylesheet" href="~/css/home.css" asp-append-version="true" />
}

<!-- Hero Section (Premium Coursera-style) -->
<section class="hero-section position-relative overflow-hidden mb-5">
    <div class="hero-background"></div>
    <div class="container position-relative">
        <div class="row align-items-center min-vh-75">
            <div class="col-lg-6 order-lg-1">
                <div class="hero-content">
                    <h1 class="hero-title display-4 fw-bold mb-4">
                        Learn without limits
                    </h1>
                    <p class="hero-subtitle lead text-muted mb-5">
                        Start, switch, or advance your career with thousands of courses, 
                        Professional Certificates, and degrees from world-class universities and companies.
                    </p>
                    <div class="hero-actions d-flex gap-3 flex-wrap mb-5">
                        <a asp-page="/User/Register" class="btn btn-primary btn-lg px-5 py-3">
                            <i class="bi bi-person-plus me-2"></i>
                            Join for Free
                        </a>
                        <a asp-page="/Index" asp-route-viewAll="true" class="btn btn-outline-primary btn-lg px-5 py-3">
                            <i class="bi bi-play-circle me-2"></i>
                            Explore Courses
                        </a>
                    </div>
                    
                    <!-- Trust indicators -->
                    <div class="hero-stats">
                        <div class="d-flex gap-4 flex-wrap text-muted small">
                            <div class="d-flex align-items-center">
                                <i class="bi bi-people-fill me-2 text-primary"></i>
                                <span><strong>100M+</strong> registered learners</span>
                            </div>
                            <div class="d-flex align-items-center">
                                <i class="bi bi-mortarboard-fill me-2 text-success"></i>
                                <span><strong>7,000+</strong> courses</span>
                            </div>
                            <div class="d-flex align-items-center">
                                <i class="bi bi-award-fill me-2 text-warning"></i>
                                <span><strong>Industry leaders</strong> as instructors</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 order-lg-2 text-center">
                <div class="hero-image-container">
                    <img src="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=800&h=600&fit=crop&crop=faces" 
                         alt="Students learning together" 
                         class="hero-image img-fluid rounded-4 shadow-lg"
                         loading="lazy">
                    <div class="floating-card">
                        <div class="d-flex align-items-center">
                            <div class="avatar-stack me-3">
                                <img src="https://images.unsplash.com/photo-1494790108755-2616b612b47c?w=40&h=40&fit=crop&crop=face" class="avatar" alt="Learner">
                                <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=40&h=40&fit=crop&crop=face" class="avatar" alt="Learner">
                                <img src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=40&h=40&fit=crop&crop=face" class="avatar" alt="Learner">
                            </div>
                            <div>
                                <div class="small fw-semibold">Join 100M+ learners</div>
                                <div class="small text-muted">Learning together</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Category Navigation -->
<section class="category-nav mb-5">
    <div class="container">
        <div class="category-pills-container">
            <div class="category-pills d-flex gap-2 flex-nowrap overflow-auto pb-2">
                <a asp-page="/Index" 
                   class="category-pill @(Model.SelectedCategoryId == null && !Model.ViewAll && string.IsNullOrEmpty(Model.SearchTerm) ? "active" : "")">
                    <i class="bi bi-star-fill me-1"></i>
                    Featured
                </a>
                <a asp-page="/Index" asp-route-viewAll="true"
                   class="category-pill @(Model.ViewAll ? "active" : "")">
                    <i class="bi bi-grid me-1"></i>
                    All Courses
                </a>
                @foreach (var cat in Model.Categories)
                {
                    <a asp-page="/Index" asp-route-categoryId="@cat.Id"
                       class="category-pill @(Model.SelectedCategoryId == cat.Id ? "active" : "")">
                        <i class="bi bi-bookmark me-1"></i>
                        @cat.Name
                    </a>
                }
            </div>
        </div>
    </div>
</section>

<!-- Search Results Header -->
@if (!string.IsNullOrEmpty(Model.SearchTerm))
{
    <section class="search-results-header mb-4">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h2 class="h4 mb-1">Search results for "@Model.SearchTerm"</h2>
                    <p class="text-muted small mb-0">@Model.FeaturedCourses?.Count() results found</p>
                </div>
                <a asp-page="/Index" class="btn btn-outline-secondary btn-sm">
                    <i class="bi bi-x-lg me-1"></i>
                    Clear search
                </a>
            </div>
        </div>
    </section>
}

<!-- Main Content Section -->
<section class="main-content">
    <div class="container">
        <!-- Section Header -->
        <div class="section-header mb-4">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h2 class="section-title fw-bold mb-2">
                        @if (Model.ViewAll) 
                        { 
                            <text>All Courses</text> 
                        }
                        else if (Model.SelectedCategoryId.HasValue) 
                        { 
                            <text>@Model.Categories.FirstOrDefault(c => c.Id == Model.SelectedCategoryId)?.Name Courses</text> 
                        }
                        else 
                        { 
                            <text>Most Popular Courses</text> 
                        }
                    </h2>
                    <p class="section-subtitle text-muted mb-0">Explore our expertly curated selection</p>
                </div>
                <div class="section-actions">
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-outline-secondary btn-sm active" data-view="grid">
                            <i class="bi bi-grid-3x3-gap"></i>
                        </button>
                        <button type="button" class="btn btn-outline-secondary btn-sm" data-view="list">
                            <i class="bi bi-list"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Courses Grid -->
        <div class="courses-grid" id="coursesContainer">
            @if (Model.FeaturedCourses != null && Model.FeaturedCourses.Any())
            {
                <div class="row g-4">
                    @foreach (var course in Model.FeaturedCourses)
                    {
                        <div class="col-lg-4 col-md-6">
                            <div class="course-card h-100">
                                <!-- Course Image -->
                                <div class="course-image-container">
                                    @if (!string.IsNullOrEmpty(course.ImageUrl))
                                    {
                                        <img src="@course.ImageUrl" class="course-image" alt="@course.Title" loading="lazy">
                                    }
                                    else
                                    {
                                        <div class="course-image-placeholder">
                                            <i class="bi bi-book course-placeholder-icon"></i>
                                        </div>
                                    }
                                    <div class="course-overlay">
                                        <a asp-page="/Course/Details" asp-route-id="@course.Id" class="btn btn-primary btn-sm">
                                            View Course
                                        </a>
                                    </div>
                                </div>
                                
                                <div class="course-content">
                                    <!-- Category Badge -->
                                    <div class="course-meta mb-2">
                                        <span class="course-category-badge">
                                            @course.CategoryName
                                        </span>
                                        <div class="course-rating">
                                            <div class="stars">
                                                <i class="bi bi-star-fill"></i>
                                                <i class="bi bi-star-fill"></i>
                                                <i class="bi bi-star-fill"></i>
                                                <i class="bi bi-star-fill"></i>
                                                <i class="bi bi-star-half"></i>
                                            </div>
                                            <span class="rating-text">(4.5)</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Course Title -->
                                    <h5 class="course-title mb-2">
                                        <a asp-page="/Course/Details" asp-route-id="@course.Id" class="course-link">
                                            @course.Title
                                        </a>
                                    </h5>
                                    
                                    <!-- Instructor -->
                                    <p class="course-instructor text-muted mb-3">
                                        <i class="bi bi-person me-1"></i>
                                        @course.InstructorName
                                    </p>
                                    
                                    <!-- Course Stats -->
                                    <div class="course-stats mb-3">
                                        <div class="d-flex justify-content-between text-muted small">
                                            <span><i class="bi bi-clock me-1"></i>12 hours</span>
                                            <span><i class="bi bi-people me-1"></i>2.5k students</span>
                                            <span><i class="bi bi-translate me-1"></i>English</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Price & Action -->
                                    <div class="course-footer d-flex justify-content-between align-items-center">
                                        <div class="course-price">
                                            <span class="current-price fw-bold">@course.Price.ToString("C")</span>
                                        </div>
                                        <button class="btn btn-outline-primary btn-sm add-to-wishlist" 
                                                data-course-id="@course.Id"
                                                title="Add to wishlist">
                                            <i class="bi bi-heart"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            }
            else
            {
                <div class="empty-state text-center py-5">
                    <div class="empty-state-icon mb-4">
                        <i class="bi bi-search text-muted"></i>
                    </div>
                    <h4 class="empty-state-title mb-3">No courses found</h4>
                    <p class="empty-state-text text-muted mb-4">
                        We couldn't find any courses matching your criteria. Try adjusting your search or browse all courses.
                    </p>
                    <a asp-page="/Index" asp-route-viewAll="true" class="btn btn-primary">
                        Browse All Courses
                    </a>
                </div>
            }
        </div>
    </div>
</section>

<!-- Learning Paths Section -->
<section class="learning-paths-section py-5 mt-5" style="background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);">
    <div class="container">
        <div class="section-header text-center mb-5">
            <h2 class="section-title fw-bold mb-3">Popular Learning Paths</h2>
            <p class="section-subtitle text-muted">Structured learning journeys designed by experts</p>
        </div>

        <div class="row g-4">
            @if (Model.FeaturedPaths != null && Model.FeaturedPaths.Any())
            {
                @foreach (var path in Model.FeaturedPaths)
                {
                    <div class="col-lg-6">
                        <div class="learning-path-card h-100">
                            <div class="learning-path-header">
                                <div class="d-flex justify-content-between align-items-start mb-3">
                                    <div class="path-badges">
                                        <span class="path-badge">@path.Courses.Count() Courses</span>
                                        <span class="path-level-badge">Beginner</span>
                                    </div>
                                    <div class="path-price">
                                        <span class="price-text fw-bold">@path.Price.ToString("C")</span>
                                    </div>
                                </div>
                                <h4 class="path-title fw-bold mb-2">@path.Title</h4>
                                <p class="path-description text-muted mb-3">@path.Description</p>
                            </div>
                            
                            <!-- Path Preview -->
                            <div class="path-preview mb-4">
                                <div class="path-courses">
                                    @foreach (var course in path.Courses.Take(3))
                                    {
                                        <div class="path-course-item">
                                            <i class="bi bi-play-circle-fill text-primary me-2"></i>
                                            <span>@course.Title</span>
                                        </div>
                                    }
                                    @if (path.Courses.Count() > 3)
                                    {
                                        <div class="path-course-item more-courses">
                                            <i class="bi bi-three-dots me-2"></i>
                                            <span class="text-muted">+ @(path.Courses.Count() - 3) more courses</span>
                                        </div>
                                    }
                                </div>
                            </div>
                            
                            <!-- Path Stats -->
                            <div class="path-stats mb-4">
                                <div class="d-flex gap-4 text-muted small">
                                    <span><i class="bi bi-clock me-1"></i>3-6 months</span>
                                    <span><i class="bi bi-people me-1"></i>15k+ enrolled</span>
                                    <span><i class="bi bi-award me-1"></i>Certificate</span>
                                </div>
                            </div>
                            
                            <!-- Action Button -->
                            <div class="path-action">
                                <a asp-page="/LearningPath/Details" asp-route-id="@path.Id" 
                                   class="btn btn-primary w-100 py-2">
                                    <i class="bi bi-arrow-right me-2"></i>
                                    Start Learning Path
                                </a>
                            </div>
                        </div>
                    </div>
                }
            }
            else
            {
                <div class="col-12">
                    <div class="text-center py-4">
                        <p class="text-muted">Learning paths will be available soon.</p>
                    </div>
                </div>
            }
        </div>

        <div class="text-center mt-5">
            <a asp-page="/LearningPath/Browse" class="btn btn-outline-primary btn-lg">
                View All Learning Paths
                <i class="bi bi-arrow-right ms-2"></i>
            </a>
        </div>
    </div>
</section>

<!-- Call-to-Action Section -->
<section class="cta-section py-5 my-5">
    <div class="container">
        <div class="cta-card text-center">
            <div class="cta-content">
                <h2 class="cta-title fw-bold mb-3">Take the next step in your career</h2>
                <p class="cta-subtitle text-muted mb-4">
                    Get personalized recommendations based on your skills and career goals
                </p>
                <div class="cta-actions">
                    <a asp-page="/Assessment/Start" class="btn btn-primary btn-lg me-3">
                        <i class="bi bi-clipboard-check me-2"></i>
                        Take Skill Assessment
                    </a>
                    <a asp-page="/User/Register" class="btn btn-outline-primary btn-lg">
                        <i class="bi bi-person-plus me-2"></i>
                        Join for Free
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<partial name="_Chatbot" />
