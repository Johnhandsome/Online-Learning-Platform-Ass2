@page "/Course/Details/{id:guid}"
@model OnlineLearningPlatformAss2.RazorWebApp.Pages.Course.DetailsModel

@{
    ViewData["Title"] = Model.CourseDetails?.Title ?? "Course Details";
}

@section Styles {
    <link rel="stylesheet" href="~/css/course-details.css" asp-append-version="true" />
}

@if (Model.CourseDetails == null)
{
    <div class="container my-5">
        <div class="text-center">
            <h1>Course Not Found</h1>
            <p>The course you're looking for doesn't exist or has been removed.</p>
            <a asp-page="/Index" class="btn btn-primary">Back to Home</a>
        </div>
    </div>
}
else
{
    <!-- Course Hero Section -->
    <section class="course-hero">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <div class="course-info">
                        <div class="course-category">
                            <i class="bi bi-bookmark"></i>
                            @Model.CourseDetails.CategoryName
                        </div>
                        <h1 class="course-title">@Model.CourseDetails.Title</h1>
                        <p class="course-description">@Model.CourseDetails.Description</p>
                        
                        <div class="course-meta">
                            <div class="meta-item">
                                <div class="rating">
                                    <div class="stars">
                                        <span>?????</span>
                                    </div>
                                    <span class="rating-text">4.5 (2,847 reviews)</span>
                                </div>
                            </div>
                            <div class="meta-item">
                                <i class="bi bi-people"></i>
                                <span>15,432 students</span>
                            </div>
                            <div class="meta-item">
                                <i class="bi bi-person"></i>
                                <span>By @Model.CourseDetails.InstructorName</span>
                            </div>
                            <div class="meta-item">
                                <i class="bi bi-globe"></i>
                                <span>English</span>
                            </div>
                        </div>

                        <div class="course-badges">
                            <span class="badge badge-bestseller">Bestseller</span>
                            <span class="badge badge-updated">Recently updated</span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="course-card-preview">
                        <div class="course-image">
                            @if (!string.IsNullOrEmpty(Model.CourseDetails.ImageUrl))
                            {
                                <img src="@Model.CourseDetails.ImageUrl" alt="@Model.CourseDetails.Title" />
                            }
                            else
                            {
                                <div class="image-placeholder">
                                    <i class="bi bi-play-circle"></i>
                                </div>
                            }
                        </div>
                        <div class="course-purchase">
                            <div class="price-section">
                                <div class="current-price">@Model.CourseDetails.Price.ToString("C")</div>
                                <div class="original-price">$199.99</div>
                                <div class="discount">75% off</div>
                            </div>
                            
                            @if (Model.CourseDetails.IsEnrolled)
                            {
                                <button class="btn btn-success w-100 mb-3" disabled>
                                    <i class="bi bi-check-circle me-2"></i>
                                    Already Enrolled
                                </button>
                                <a href="#" class="btn btn-outline-primary w-100 mb-3">
                                    Continue Learning
                                </a>
                            }
                            else
                            {
                                <button class="btn btn-primary w-100 mb-3" onclick="enrollInCourse('@Model.CourseDetails.Id')">
                                    Enroll Now
                                </button>
                                <button class="btn btn-outline-secondary w-100 mb-3" onclick="addToWishlist('@Model.CourseDetails.Id')">
                                    <i class="bi bi-heart me-2"></i>
                                    Add to Wishlist
                                </button>
                            }
                            
                            <div class="course-includes">
                                <h6>This course includes:</h6>
                                <div class="include-item">
                                    <i class="bi bi-play-circle"></i>
                                    <span>12 hours on-demand video</span>
                                </div>
                                <div class="include-item">
                                    <i class="bi bi-file-earmark"></i>
                                    <span>15 articles</span>
                                </div>
                                <div class="include-item">
                                    <i class="bi bi-download"></i>
                                    <span>32 downloadable resources</span>
                                </div>
                                <div class="include-item">
                                    <i class="bi bi-infinity"></i>
                                    <span>Full lifetime access</span>
                                </div>
                                <div class="include-item">
                                    <i class="bi bi-phone"></i>
                                    <span>Access on mobile and TV</span>
                                </div>
                                <div class="include-item">
                                    <i class="bi bi-award"></i>
                                    <span>Certificate of completion</span>
                                </div>
                            </div>

                            <div class="guarantee">
                                <i class="bi bi-shield-check"></i>
                                <span>30-Day Money-Back Guarantee</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Course Content Tabs -->
    <section class="course-content">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <!-- Navigation Tabs -->
                    <nav class="course-tabs">
                        <div class="nav nav-tabs" id="courseTab" role="tablist">
                            <button class="nav-link active" id="overview-tab" data-bs-toggle="tab" data-bs-target="#overview" type="button" role="tab">
                                Overview
                            </button>
                            <button class="nav-link" id="curriculum-tab" data-bs-toggle="tab" data-bs-target="#curriculum" type="button" role="tab">
                                Curriculum
                            </button>
                            <button class="nav-link" id="instructor-tab" data-bs-toggle="tab" data-bs-target="#instructor" type="button" role="tab">
                                Instructor
                            </button>
                            <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews" type="button" role="tab">
                                Reviews
                            </button>
                        </div>
                    </nav>

                    <!-- Tab Content -->
                    <div class="tab-content" id="courseTabContent">
                        <!-- Overview -->
                        <div class="tab-pane fade show active" id="overview" role="tabpanel">
                            <div class="overview-content">
                                <h3>What you'll learn</h3>
                                <div class="learning-outcomes">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="outcome-item">
                                                <i class="bi bi-check-circle"></i>
                                                <span>Build responsive web applications</span>
                                            </div>
                                            <div class="outcome-item">
                                                <i class="bi bi-check-circle"></i>
                                                <span>Master modern CSS techniques</span>
                                            </div>
                                            <div class="outcome-item">
                                                <i class="bi bi-check-circle"></i>
                                                <span>Create interactive user interfaces</span>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="outcome-item">
                                                <i class="bi bi-check-circle"></i>
                                                <span>Understand web accessibility</span>
                                            </div>
                                            <div class="outcome-item">
                                                <i class="bi bi-check-circle"></i>
                                                <span>Deploy web applications</span>
                                            </div>
                                            <div class="outcome-item">
                                                <i class="bi bi-check-circle"></i>
                                                <span>Debug and optimize performance</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <h3>Requirements</h3>
                                <ul class="requirements-list">
                                    <li>Basic understanding of HTML</li>
                                    <li>No prior CSS experience required</li>
                                    <li>A computer with internet access</li>
                                    <li>Willingness to learn and practice</li>
                                </ul>

                                <h3>Description</h3>
                                <div class="course-full-description">
                                    <p>
                                        This comprehensive course will take you from CSS basics to advanced layouts and modern techniques. 
                                        You'll learn everything you need to create beautiful, responsive websites that work across all devices.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Curriculum -->
                        <div class="tab-pane fade" id="curriculum" role="tabpanel">
                            <div class="curriculum-content">
                                <div class="curriculum-header">
                                    <h3>Course Curriculum</h3>
                                    <div class="curriculum-stats">
                                        <span>8 sections • 45 lectures • 12h 30m total length</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Instructor -->
                        <div class="tab-pane fade" id="instructor" role="tabpanel">
                            <div class="instructor-content">
                                <div class="instructor-profile">
                                    <div class="instructor-avatar">
                                        <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=120&h=120&fit=crop&crop=face" alt="@Model.CourseDetails.InstructorName">
                                    </div>
                                    <div class="instructor-info">
                                        <h3>@Model.CourseDetails.InstructorName</h3>
                                        <p class="instructor-title">Senior Web Developer & CSS Expert</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Reviews -->
                        <div class="tab-pane fade" id="reviews" role="tabpanel">
                            <div class="reviews-content">
                                <div class="reviews-summary">
                                    <div class="rating-overview">
                                        <div class="average-rating">
                                            <span class="rating-number">4.5</span>
                                            <div class="stars">
                                                <span>?????</span>
                                            </div>
                                            <span class="rating-count">Course Rating • 2,847 reviews</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
}

@section Scripts {
    <script>
        function enrollInCourse(courseId) {
            alert('Enrollment functionality will be implemented soon!');
        }

        function addToWishlist(courseId) {
            alert('Wishlist functionality will be implemented soon!');
        }
    </script>
}
